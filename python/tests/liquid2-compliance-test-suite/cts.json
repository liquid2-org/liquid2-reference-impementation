{
  "description": "Liquid2 compliance test suite",
  "tests": [
    {
      "name": "tags, assign, string literal",
      "template": "{% assign a = 'b' %}{{ a }}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, assign, integer literal",
      "template": "{% assign a = 123 %}{{ a }}",
      "data": {},
      "result": "123"
    },
    {
      "name": "tags, assign, float literal",
      "template": "{% assign a = 1.23 %}{{ a }}",
      "data": {},
      "result": "1.23"
    },
    {
      "name": "tags, assign, range literal",
      "template": "{% assign a = (1..3) %}{{ a | join: '#' }}",
      "data": {},
      "result": "1#2#3"
    },
    {
      "name": "tags, assign, simple query",
      "template": "{% assign a = b %}{{ a }}",
      "data": {
        "b": "c"
      },
      "result": "c"
    },
    {
      "name": "tags, assign, query, nested object",
      "template": "{% assign a = b.c %}{{ a }}",
      "data": {
        "b": {
          "c": "d"
        }
      },
      "result": "d"
    },
    {
      "name": "tags, assign, query, nested array element",
      "template": "{% assign a = b.c[1] %}{{ a }}",
      "data": {
        "b": {
          "c": [
            1,
            2,
            3
          ]
        }
      },
      "result": "2"
    },
    {
      "name": "tags, assign, string literal containing an end tag delimiter",
      "template": "{% assign a = 'foo%}bar' %}{{ a }}",
      "data": {},
      "result": "foo%}bar"
    },
    {
      "name": "tags, assign, string literal containing a start output delimiter",
      "template": "{% assign a = 'foo{{bar' %}{{ a }}",
      "data": {},
      "result": "foo{{bar"
    },
    {
      "name": "tags, assign, shadow global variable",
      "template": "{{ a }}{% assign a = 'c' %}{{ a }}",
      "data": {
        "a": "b"
      },
      "result": "bc"
    },
    {
      "name": "tags, assign, string literal, filtered",
      "template": "{% assign a = 'b' | upcase %}{{ a }}",
      "data": {},
      "result": "B"
    },
    {
      "name": "tags, assign, ternary expression, truthy",
      "template": "{% assign a = 'b' if true else 'c' %}{{ a }}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, assign, ternary expression, falsy",
      "template": "{% assign a = 'b' if false else 'c' %}{{ a }}",
      "data": {},
      "result": "c"
    },
    {
      "name": "tags, assign, ternary expression, truthy filter",
      "template": "{% assign a = 'b' | upcase if true else 'c' %}{{ a }}",
      "data": {},
      "result": "B"
    },
    {
      "name": "tags, assign, ternary expression, falsy filter",
      "template": "{% assign a = 'b' if false else 'c' | upcase %}{{ a }}",
      "data": {},
      "result": "C"
    },
    {
      "name": "tags, assign, ternary expression, truthy, falsy filter",
      "template": "{% assign a = 'b' if true else 'c' | upcase %}{{ a }}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, assign, ternary expression, falsy, truthy filter",
      "template": "{% assign a = 'b' | upcase if false else 'c' %}{{ a }}",
      "data": {},
      "result": "c"
    },
    {
      "name": "tags, assign, ternary expression, tail filter",
      "template": "{% assign a = 'b' if true else 'c' || upcase %}{{ a }}",
      "data": {},
      "result": "B"
    },
    {
      "name": "tags, assign, missing assignment operator",
      "template": "{% assign a 'b' %}",
      "invalid": true
    },
    {
      "name": "tags, assign, missing expression",
      "template": "{% assign a = %}",
      "invalid": true
    },
    {
      "name": "tags, if, literal true",
      "template": "{% if true %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, literal false, no alternative",
      "template": "{% if false %}a{% endif %}",
      "data": {},
      "result": ""
    },
    {
      "name": "tags, if, literal false, alternative",
      "template": "{% if false %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, literal false, truthy alternative",
      "template": "{% if false %}a{% elsif true %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, literal false, falsy alternative",
      "template": "{% if false %}a{% elsif false %}b{% endif %}",
      "data": {},
      "result": ""
    },
    {
      "name": "tags, if, literal false, falsy alternative, final alternative",
      "template": "{% if false %}a{% elsif false %}b{% else %}c{% endif %}",
      "data": {},
      "result": "c"
    },
    {
      "name": "tags, if, equality, truthy, strings",
      "template": "{% if a == 'b' %}c{% endif %}",
      "data": {
        "a": "b"
      },
      "result": "c"
    },
    {
      "name": "tags, if, equality, falsy, strings",
      "template": "{% if a == 'x' %}c{% endif %}",
      "data": {
        "a": "b"
      },
      "result": ""
    },
    {
      "name": "tags, if, equality, truthy, integers",
      "template": "{% if a == 1 %}b{% endif %}",
      "data": {
        "a": 1
      },
      "result": "b"
    },
    {
      "name": "tags, if, equality, falsy, integers",
      "template": "{% if a == 1 %}b{% endif %}",
      "data": {
        "a": 2
      },
      "result": ""
    },
    {
      "name": "tags, if, equality, truthy, floats",
      "template": "{% if a == 1.1 %}b{% endif %}",
      "data": {
        "a": 1.1
      },
      "result": "b"
    },
    {
      "name": "tags, if, equality, falsy, floats",
      "template": "{% if a == 1.2 %}b{% endif %}",
      "data": {
        "a": 1.0
      },
      "result": ""
    },
    {
      "name": "tags, if, equality, truthy, float and integer",
      "template": "{% if a == 1 %}b{% endif %}",
      "data": {
        "a": 1.0
      },
      "result": "b"
    },
    {
      "name": "tags, if, equality, falsy, float and integer",
      "template": "{% if a == 1 %}b{% endif %}",
      "data": {
        "a": 1.1
      },
      "result": ""
    },
    {
      "name": "tags, if, less than, truthy, integers",
      "template": "{% if a < 10 %}b{% endif %}",
      "data": {
        "a": 5
      },
      "result": "b"
    },
    {
      "name": "tags, if, less than, falsy, integers",
      "template": "{% if a < 10 %}b{% endif %}",
      "data": {
        "a": 20
      },
      "result": ""
    },
    {
      "name": "tags, if, less than, truthy, floats",
      "template": "{% if a < 10.1 %}b{% endif %}",
      "data": {
        "a": 5.1
      },
      "result": "b"
    },
    {
      "name": "tags, if, less than, falsy, floats",
      "template": "{% if a < 10.1 %}b{% endif %}",
      "data": {
        "a": 20.1
      },
      "result": ""
    },
    {
      "name": "tags, if, less than, truthy, strings",
      "template": "{% if 'abc' < 'acb' %}x{% endif %}",
      "data": {},
      "result": "x"
    },
    {
      "name": "tags, if, less than, falsy, strings",
      "template": "{% if 'bbb' < 'aaa' %}x{% else %}y{% endif %}",
      "data": {},
      "result": "y"
    },
    {
      "name": "tags, if, non-empty hash or dict or map is truthy",
      "template": "{% if a %}d{% endif %}",
      "data": {
        "a": {
          "b": "c"
        }
      },
      "result": "d"
    },
    {
      "name": "tags, if, literal null is falsy",
      "template": "{% if null %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, literal nil is falsy",
      "template": "{% if nil %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, undefined variables are falsy",
      "template": "{% if nosuchthing %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, undefined variables are equal to null",
      "template": "{% if nosuchthing == null %}a{% else %}b{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, nested, truthy",
      "template": "{% if true %}a{% if true %}b{% endif %}{% else %}c{% endif %}",
      "data": {},
      "result": "ab"
    },
    {
      "name": "tags, if, nested, falsy",
      "template": "{% if true %}a{% if false %}b{% endif %}{% else %}c{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, contains, truthy, array of integers",
      "template": "{% if a contains 1 %}b{% endif %}",
      "data": {
        "a": [
          1,
          2,
          3
        ]
      },
      "result": "b"
    },
    {
      "name": "tags, if, contains, falsy, array of integers",
      "template": "{% if a contains 5 %}b{% else %}c{% endif %}",
      "data": {
        "a": [
          1,
          2,
          3
        ]
      },
      "result": "c"
    },
    {
      "name": "tags, if, in, truthy, array of integers",
      "template": "{% if 1 in a %}b{% else %}c{% endif %}",
      "data": {
        "a": [
          1,
          2,
          3
        ]
      },
      "result": "b"
    },
    {
      "name": "tags, if, in, falsy, array of integers",
      "template": "{% if 5 in a %}b{% else %}c{% endif %}",
      "data": {
        "a": [
          1,
          2,
          3
        ]
      },
      "result": "c"
    },
    {
      "name": "tags, if, contains, truthy, strings",
      "template": "{% if 'foobar' contains 'oob' %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, contains, falsy, strings",
      "template": "{% if 'foobar' contains 'baz' %}b{% else %}c{% endif %}",
      "data": {},
      "result": "c"
    },
    {
      "name": "tags, if, contains, string and integer",
      "template": "{% if 'foo2bar' contains 2 %}a{% else %}b{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, in, truthy, strings",
      "template": "{% if 'oob' in 'foobar' %}b{% else %}c{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, in, falsy, strings",
      "template": "{% if 'baz' in 'foobar' %}b{% else %}c{% endif %}",
      "data": {},
      "result": "c"
    },
    {
      "name": "tags, if, contains, truthy, hash or dict or map",
      "template": "{% if a contains 'b' %}c{% endif %}",
      "data": {
        "a": {
          "b": false
        }
      },
      "result": "c"
    },
    {
      "name": "tags, if, contains, falsy, hash or dict or map",
      "template": "{% if a contains 'b' %}c{% else %}d{% endif %}",
      "data": {
        "a": {
          "e": true
        }
      },
      "result": "d"
    },
    {
      "name": "tags, if, in, truthy, hash or dict or map",
      "template": "{% if 'a' in b %}c{% else %}d{% endif %}",
      "data": {
        "b": {
          "a": false
        }
      },
      "result": "c"
    },
    {
      "name": "tags, if, in, falsy, hash or dict or map",
      "template": "{% if 'a' in b %}c{% else %}d{% endif %}",
      "data": {
        "b": {
          "e": true
        }
      },
      "result": "d"
    },
    {
      "name": "tags, if, not equal, truthy, strings",
      "template": "{% if a != 'b' %}c{% endif %}",
      "data": {
        "a": "d"
      },
      "result": "c"
    },
    {
      "name": "tags, if, not equal, falsy, strings",
      "template": "{% if a != 'x' %}c{% else %}d{% endif %}",
      "data": {
        "a": "x"
      },
      "result": "d"
    },
    {
      "name": "tags, if, not equal, alternative operator",
      "template": "{% if a <> 'b' %}c{% endif %}",
      "data": {
        "a": "d"
      },
      "result": "c"
    },
    {
      "name": "tags, if, empty string is truthy",
      "template": "{% if '' %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, empty array is truthy",
      "template": "{% if a %}b{% endif %}",
      "data": {
        "a": []
      },
      "result": "b"
    },
    {
      "name": "tags, if, empty array is equal to special empty",
      "template": "{% if a == empty %}b{% endif %}",
      "data": {
        "a": []
      },
      "result": "b"
    },
    {
      "name": "tags, if, empty hash or dict or map is equal to special empty",
      "template": "{% if a == empty %}b{% endif %}",
      "data": {
        "a": {}
      },
      "result": "b"
    },
    {
      "name": "tags, if, empty string is equal to special empty",
      "template": "{% if a == empty %}b{% endif %}",
      "data": {
        "a": ""
      },
      "result": "b"
    },
    {
      "name": "tags, if, empty string is equal to special blank",
      "template": "{% if a == blank %}b{% endif %}",
      "data": {
        "a": ""
      },
      "result": "b"
    },
    {
      "name": "tags, if, whitespace only string is equal to special blank",
      "template": "{% if '  ' == blank %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, equality, range literal",
      "template": "{% assign a = (1..3) %}{% if a == (1..3) %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, equality, arrays",
      "template": "{% assign a = 'a,b,c' | split: ',' %}{% if a == b %}c{% endif %}",
      "data": {
        "b": [
          "a",
          "b",
          "c"
        ]
      },
      "result": "c"
    },
    {
      "name": "tags, if, equality, string and integer",
      "template": "{% if 1 == '1' %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, greater than, string and integer",
      "template": "{% if 2 > '1' %}a{% else %}b{% endif %}",
      "invalid": true
    },
    {
      "name": "tags, if, logical not, false literal",
      "template": "{% if not false %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, logical not, true literal",
      "template": "{% if not true %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, logical and binds more tightly than or",
      "template": "{% if true and false and false or true %}a{% else %}b{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, group terms with parentheses",
      "template": "{% if (true and (false and (false or true))) %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, unbalanced parentheses",
      "template": "{% if true and (false and true %}a{% else %}b{% endif %}",
      "invalid": true
    },
    {
      "name": "tags, if, more unbalanced parentheses",
      "template": "{% if (true and (false and (false or true)) %}a{% else %}b{% endif %}",
      "invalid": true
    },
    {
      "name": "tags, if, zero is not equal to false",
      "template": "{% if 0 == false %}a{% else %}b{% endif %}",
      "data": {},
      "result": "b"
    },
    {
      "name": "tags, if, zero is truthy",
      "template": "{% if 0 %}a{% else %}b{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, float zero is truthy",
      "template": "{% if 0.0 %}a{% else %}b{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, missing whitespace after tag name",
      "template": "{% iftrue %}a{% endif %}",
      "invalid": true
    },
    {
      "name": "tags, if, no whitespace before tag name",
      "template": "{%if true %}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, no whitespace after expression",
      "template": "{% if true%}a{% endif %}",
      "data": {},
      "result": "a"
    },
    {
      "name": "tags, if, extra else block",
      "template": "{% if false %}a{% else %}b{% else %}c{% endif %}",
      "invalid": true
    },
    {
      "name": "tags, if, extra elsif block",
      "template": "{% if false %}a{% else %}b{% elsif true %}c{% endif %}",
      "invalid": true
    }
  ]
}